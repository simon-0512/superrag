# SuperRAG ç¤¾åŒºåŠŸèƒ½è®¾è®¡æ–‡æ¡£

## ğŸŒŸ åŠŸèƒ½æ¦‚è¿°

SuperRAGç¤¾åŒºæ˜¯ä¸€ä¸ªä¸“æ³¨äºAIåˆ›ä½œå†…å®¹åˆ†äº«çš„ç¤¾äº¤å¹³å°ï¼Œé‡‡ç”¨ç®€æ´æ¸…çˆ½çš„æ—¶é—´æµè®¾è®¡ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åˆ†äº«å’Œå‘ç°ä¼˜è´¨çš„AIåˆ›ä½œå†…å®¹ã€‚

## ğŸ“± æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. å†…å®¹åˆ†äº« (Content Sharing)

#### 1.1 åˆ†äº«å†…å®¹ç±»å‹
- **æ–‡å­—åˆ†äº«**: ç”¨æˆ·åŸåˆ›æ–‡å­—(140å­—ä»¥å†…) + AIåˆ›ä½œå†…å®¹
- **å¯¹è¯åˆ†äº«**: å®Œæ•´æˆ–éƒ¨åˆ†å¯¹è¯è®°å½•åˆ†äº«
- **PDFåˆ†äº«**: å¯¼å‡ºçš„çŸ¥è¯†æ€»ç»“PDFæ–‡æ¡£
- **æç¤ºè¯åˆ†äº«**: ä¼˜è´¨çš„AIæç¤ºè¯æ¨¡æ¿

#### 1.2 åˆ†äº«ç»„ä»¶ç»“æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ ç”¨æˆ·å¤´åƒ + æ˜µç§° + æ—¶é—´æˆ³         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“ ç”¨æˆ·æ–‡å­—æè¿° (â‰¤140å­—)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ¤– AIæç¤ºè¯ (å¯æŠ˜å æ˜¾ç¤º)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ¨ AIåˆ›ä½œå†…å®¹                      â”‚
â”‚   - å¯¹è¯å†…å®¹/PDFé¢„è§ˆ/åˆ›ä½œç»“æœ       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ·ï¸ æ ‡ç­¾: #AIåˆ›ä½œ #æç¤ºè¯ #çŸ¥è¯†åˆ†äº« â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¬ äº’åŠ¨åŒº: ğŸ‘ç‚¹èµ ğŸ’¬è¯„è®º ğŸ”„è½¬å‘ â­æ”¶è— â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. æ—¶é—´æµå±•ç¤º (Timeline Feed)

#### 2.1 å¤šç§æµè§ˆæ¨¡å¼
- **æ¨èæµ**: åŸºäºç”¨æˆ·å…´è¶£çš„æ™ºèƒ½æ¨è
- **å…³æ³¨æµ**: å…³æ³¨ç”¨æˆ·çš„æœ€æ–°åˆ†äº«
- **çƒ­é—¨æµ**: é«˜äº’åŠ¨é‡çš„ä¼˜è´¨å†…å®¹
- **åˆ†ç±»æµ**: æŒ‰å†…å®¹ç±»å‹ç­›é€‰(åˆ›ä½œ/æç¤ºè¯/çŸ¥è¯†ç­‰)

#### 2.2 UIè®¾è®¡åŸåˆ™
- **æç®€é£æ ¼**: å¤§é‡ç•™ç™½ï¼Œé‡ç‚¹çªå‡ºå†…å®¹
- **å¡ç‰‡å¸ƒå±€**: æ¯æ¡åˆ†äº«ç‹¬ç«‹å¡ç‰‡è®¾è®¡
- **æ¸è¿›åŠ è½½**: æ— é™æ»šåŠ¨ + éª¨æ¶å±
- **å“åº”å¼**: é€‚é…ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯

### 3. å†…å®¹åˆ›ä½œå·¥å…· (Creation Tools)

#### 3.1 åˆ†äº«ç¼–è¾‘å™¨
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ åˆ†äº«ä½ çš„AIåˆ›ä½œ...                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æ–‡å­—æè¿°è¾“å…¥æ¡†] (140å­—å€’è®¡æ—¶)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [+ æ·»åŠ æç¤ºè¯] [+ é€‰æ‹©å¯¹è¯] [+ ä¸Šä¼ PDF] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [é¢„è§ˆ] [ä¿å­˜è‰ç¨¿] [ç«‹å³å‘å¸ƒ]        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.2 å†…å®¹å¯¼å…¥åŠŸèƒ½
- **å¯¹è¯å¯¼å…¥**: ä»èŠå¤©è®°å½•ä¸­é€‰æ‹©ç²¾å½©ç‰‡æ®µ
- **PDFå¯¼å…¥**: ä¸Šä¼ çŸ¥è¯†æ€»ç»“æ–‡æ¡£
- **æç¤ºè¯åº“**: å†…ç½®ä¼˜è´¨æç¤ºè¯æ¨¡æ¿
- **è‰ç¨¿ä¿å­˜**: æœªå®Œæˆçš„åˆ†äº«è‡ªåŠ¨ä¿å­˜

### 4. ç”¨æˆ·ç³»ç»Ÿ (User System)

#### 4.1 ç”¨æˆ·æ¡£æ¡ˆ
- **åŸºç¡€ä¿¡æ¯**: å¤´åƒã€æ˜µç§°ã€ä¸ªäººç®€ä»‹
- **åˆ›ä½œç»Ÿè®¡**: åˆ†äº«æ•°ã€è·èµæ•°ã€ç²‰ä¸æ•°
- **ä¸“ä¸šæ ‡ç­¾**: AIç ”ç©¶è€…ã€åˆ›ä½œè€…ã€å­¦ä¹ è€…ç­‰
- **æˆå°±ç³»ç»Ÿ**: åˆ›ä½œè¾¾äººã€æç¤ºè¯ä¸“å®¶ç­‰å¾½ç« 

#### 4.2 ç¤¾äº¤å…³ç³»
- **å…³æ³¨/ç²‰ä¸**: å»ºç«‹ç”¨æˆ·è¿æ¥
- **å¥½å‹ç³»ç»Ÿ**: ç§ä¿¡å’Œæ·±åº¦äº¤æµ
- **å…´è¶£åœˆå­**: æŒ‰ä¸»é¢˜èšé›†çš„ç”¨æˆ·ç¾¤ä½“

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„è®¾è®¡

### æ•°æ®åº“è®¾è®¡

#### 5.1 æ ¸å¿ƒæ•°æ®è¡¨

**ç”¨æˆ·è¡¨æ‰©å±• (users)**
```sql
ALTER TABLE users ADD COLUMN (
    nickname VARCHAR(50),           -- æ˜µç§°
    avatar_url VARCHAR(255),        -- å¤´åƒURL
    bio TEXT,                       -- ä¸ªäººç®€ä»‹
    follower_count INT DEFAULT 0,   -- ç²‰ä¸æ•°
    following_count INT DEFAULT 0,  -- å…³æ³¨æ•°
    post_count INT DEFAULT 0,       -- åˆ†äº«æ•°
    like_count INT DEFAULT 0,       -- è·èµæ€»æ•°
    badges JSON,                    -- æˆå°±å¾½ç« 
    created_at TIMESTAMP,
    updated_at TIMESTAMP
);
```

**ç¤¾åŒºå¸–å­è¡¨ (community_posts)**
```sql
CREATE TABLE community_posts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    content TEXT NOT NULL,              -- ç”¨æˆ·æ–‡å­—æè¿°(â‰¤140å­—)
    ai_prompt TEXT,                     -- AIæç¤ºè¯(å¯é€‰)
    ai_content_type ENUM('conversation', 'pdf', 'text'), -- AIå†…å®¹ç±»å‹
    ai_content_data JSON,               -- AIå†…å®¹æ•°æ®
    conversation_id INTEGER,            -- å…³è”çš„å¯¹è¯ID
    pdf_url VARCHAR(255),              -- PDFæ–‡ä»¶URL
    tags JSON,                         -- æ ‡ç­¾æ•°ç»„
    is_featured BOOLEAN DEFAULT FALSE, -- æ˜¯å¦ç²¾é€‰
    like_count INT DEFAULT 0,          -- ç‚¹èµæ•°
    comment_count INT DEFAULT 0,       -- è¯„è®ºæ•°
    share_count INT DEFAULT 0,         -- è½¬å‘æ•°
    view_count INT DEFAULT 0,          -- æµè§ˆæ•°
    status ENUM('draft', 'published', 'hidden') DEFAULT 'published',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (conversation_id) REFERENCES conversations(id)
);
```

**äº’åŠ¨è¡¨ (community_interactions)**
```sql
CREATE TABLE community_interactions (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    post_id INTEGER NOT NULL,
    interaction_type ENUM('like', 'comment', 'share', 'bookmark'),
    content TEXT,                       -- è¯„è®ºå†…å®¹(commentç±»å‹)
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (post_id) REFERENCES community_posts(id),
    UNIQUE(user_id, post_id, interaction_type) -- é˜²é‡å¤ç‚¹èµç­‰
);
```

**å…³æ³¨å…³ç³»è¡¨ (user_follows)**
```sql
CREATE TABLE user_follows (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    follower_id INTEGER NOT NULL,      -- å…³æ³¨è€…ID
    following_id INTEGER NOT NULL,     -- è¢«å…³æ³¨è€…ID
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (follower_id) REFERENCES users(id),
    FOREIGN KEY (following_id) REFERENCES users(id),
    UNIQUE(follower_id, following_id)
);
```

### APIè®¾è®¡

#### 5.2 æ ¸å¿ƒAPIæ¥å£

**ç¤¾åŒºå¸–å­ç›¸å…³**
```python
# è·å–æ—¶é—´æµ
GET /api/community/feed?type=recommended&page=1&limit=20

# å‘å¸ƒå¸–å­
POST /api/community/posts
{
    "content": "ä»Šå¤©ç”¨AIå†™äº†ä¸€é¦–è¯—...",
    "ai_prompt": "è¯·å†™ä¸€é¦–å…³äºæ˜¥å¤©çš„è¯—",
    "ai_content_type": "conversation", 
    "conversation_id": 123,
    "tags": ["poetry", "ai-creation"]
}

# è·å–å¸–å­è¯¦æƒ…
GET /api/community/posts/{post_id}

# ç¼–è¾‘å¸–å­
PUT /api/community/posts/{post_id}

# åˆ é™¤å¸–å­
DELETE /api/community/posts/{post_id}
```

**äº’åŠ¨ç›¸å…³**
```python
# ç‚¹èµ/å–æ¶ˆç‚¹èµ
POST /api/community/posts/{post_id}/like

# è¯„è®º
POST /api/community/posts/{post_id}/comments
{
    "content": "å¾ˆæ£’çš„åˆ†äº«ï¼"
}

# è½¬å‘
POST /api/community/posts/{post_id}/share
{
    "content": "æ¨èç»™å¤§å®¶"  # å¯é€‰è½¬å‘è¯­
}

# æ”¶è—
POST /api/community/posts/{post_id}/bookmark
```

**ç”¨æˆ·ç›¸å…³**
```python
# å…³æ³¨ç”¨æˆ·
POST /api/community/users/{user_id}/follow

# è·å–ç”¨æˆ·ä¸»é¡µ
GET /api/community/users/{user_id}/profile

# è·å–ç”¨æˆ·å¸–å­
GET /api/community/users/{user_id}/posts?page=1&limit=20
```

## ğŸ¨ å‰ç«¯å®ç°è®¾è®¡

### 6.1 é¡µé¢ç»“æ„

**ç¤¾åŒºä¸»é¡µ (community.html)**
```html
<div class="community-container">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="community-nav">
        <div class="nav-tabs">
            <button class="tab active" data-feed="recommended">æ¨è</button>
            <button class="tab" data-feed="following">å…³æ³¨</button>
            <button class="tab" data-feed="trending">çƒ­é—¨</button>
            <button class="tab" data-feed="categories">åˆ†ç±»</button>
        </div>
        <button class="create-post-btn">+ åˆ†äº«åˆ›ä½œ</button>
    </nav>
    
    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="community-content">
        <!-- å·¦ä¾§æ—¶é—´æµ -->
        <div class="feed-container">
            <div id="posts-container"></div>
            <div class="loading-indicator">åŠ è½½ä¸­...</div>
        </div>
        
        <!-- å³ä¾§ä¿¡æ¯æ  -->
        <div class="sidebar">
            <div class="trending-topics">çƒ­é—¨è¯é¢˜</div>
            <div class="recommended-users">æ¨èå…³æ³¨</div>
            <div class="quick-actions">å¿«æ·æ“ä½œ</div>
        </div>
    </div>
</div>
```

### 6.2 æ ¸å¿ƒç»„ä»¶

**å¸–å­å¡ç‰‡ç»„ä»¶**
```javascript
class PostCard {
    constructor(postData) {
        this.data = postData;
        this.element = this.render();
    }
    
    render() {
        return `
            <div class="post-card" data-post-id="${this.data.id}">
                <div class="post-header">
                    <img src="${this.data.user.avatar}" class="user-avatar">
                    <div class="user-info">
                        <span class="username">${this.data.user.nickname}</span>
                        <span class="timestamp">${this.formatTime(this.data.created_at)}</span>
                    </div>
                </div>
                
                <div class="post-content">
                    <p class="user-description">${this.data.content}</p>
                    ${this.renderAIContent()}
                    <div class="post-tags">
                        ${this.data.tags.map(tag => `<span class="tag">#${tag}</span>`).join('')}
                    </div>
                </div>
                
                <div class="post-actions">
                    <button class="action-btn like-btn" data-count="${this.data.like_count}">
                        <i class="bi bi-heart"></i> ${this.data.like_count}
                    </button>
                    <button class="action-btn comment-btn" data-count="${this.data.comment_count}">
                        <i class="bi bi-chat"></i> ${this.data.comment_count}
                    </button>
                    <button class="action-btn share-btn" data-count="${this.data.share_count}">
                        <i class="bi bi-share"></i> ${this.data.share_count}
                    </button>
                    <button class="action-btn bookmark-btn">
                        <i class="bi bi-bookmark"></i>
                    </button>
                </div>
            </div>
        `;
    }
    
    renderAIContent() {
        switch(this.data.ai_content_type) {
            case 'conversation':
                return this.renderConversation();
            case 'pdf':
                return this.renderPDF();
            case 'text':
                return this.renderText();
            default:
                return '';
        }
    }
}
```

### 6.3 æ ·å¼è®¾è®¡ (CSS)

**æç®€å¡ç‰‡æ ·å¼**
```css
.post-card {
    background: #ffffff;
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 16px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    border: 1px solid #f0f0f0;
    transition: all 0.2s ease;
}

.post-card:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    transform: translateY(-1px);
}

.post-content {
    margin: 16px 0;
    line-height: 1.6;
}

.user-description {
    font-size: 16px;
    color: #333;
    margin-bottom: 12px;
}

.ai-content {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 16px;
    margin: 12px 0;
    border-left: 4px solid #007bff;
}

.post-actions {
    display: flex;
    gap: 24px;
    padding-top: 12px;
    border-top: 1px solid #f0f0f0;
}

.action-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    background: none;
    border: none;
    color: #666;
    cursor: pointer;
    transition: color 0.2s ease;
}

.action-btn:hover {
    color: #007bff;
}

.action-btn.active {
    color: #007bff;
}
```

## ğŸš€ åŠŸèƒ½æ‰©å±•è§„åˆ’

### 7.1 è¿‘æœŸåŠŸèƒ½ (Phase 1)
- âœ… åŸºç¡€åˆ†äº«åŠŸèƒ½
- âœ… æ—¶é—´æµå±•ç¤º
- âœ… åŸºç¡€äº’åŠ¨(ç‚¹èµã€è¯„è®º)
- âœ… ç”¨æˆ·å…³æ³¨ç³»ç»Ÿ

### 7.2 ä¸­æœŸåŠŸèƒ½ (Phase 2)
- ğŸ”„ AIåˆ›ä½œå¤§èµ›æ¨¡å—
- ğŸ”„ æç¤ºè¯åº“å’Œè¯„åˆ†
- ğŸ”„ çŸ¥è¯†ä¸“é¢˜å’Œåˆé›†
- ğŸ”„ ç”¨æˆ·ç­‰çº§å’Œæˆå°±ç³»ç»Ÿ

### 7.3 é•¿æœŸåŠŸèƒ½ (Phase 3)
- ğŸ”® AIåŠ©æ‰‹æ¨èä¼˜è´¨å†…å®¹
- ğŸ”® è·¨å¹³å°å†…å®¹åŒæ­¥
- ğŸ”® ä»˜è´¹ä¼˜è´¨å†…å®¹è®¢é˜…
- ğŸ”® åˆ›ä½œè€…æ¿€åŠ±è®¡åˆ’

## ğŸ“Š è¿è¥ç­–ç•¥

### 8.1 å†…å®¹è´¨é‡ä¿éšœ
- **æ™ºèƒ½å®¡æ ¸**: AIè‡ªåŠ¨æ£€æµ‹ä½è´¨é‡å†…å®¹
- **äººå·¥ç²¾é€‰**: è¿è¥å›¢é˜Ÿç­›é€‰ä¼˜è´¨å†…å®¹
- **ç”¨æˆ·ä¸¾æŠ¥**: ç¤¾åŒºè‡ªæ²»æœºåˆ¶
- **åˆ›ä½œæŒ‡å—**: åˆ†äº«æœ€ä½³å®è·µ

### 8.2 ç”¨æˆ·æˆé•¿ä½“ç³»
- **æ–°æ‰‹å¼•å¯¼**: å¸®åŠ©ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹
- **åˆ›ä½œæ¿€åŠ±**: ä¼˜è´¨å†…å®¹è·å¾—æ›´å¤šæ›å…‰
- **ä¸“å®¶è®¤è¯**: ä¸“ä¸šç”¨æˆ·è®¤è¯ä½“ç³»
- **ç¤¾åŒºæ´»åŠ¨**: å®šæœŸä¸¾åŠåˆ›ä½œæ¯”èµ›

è¿™ä¸ªç¤¾åŒºåŠŸèƒ½å°†æˆä¸ºSuperRAGå¹³å°çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªå±•ç¤ºå’Œå‘ç°AIåˆ›ä½œå†…å®¹çš„ä¼˜è´¨å¹³å°ï¼ 